  <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-ua-compartible" content="IE=edge">
    <meta name="amazon" content="width=device=width, initial-scale=1.0">
    <title>Proyecto taller fic</title>
    <link rel="stylesheet" href="css/estilos.css"/>
    <link rel="stylesheet" type="css/estilos.css" href=" https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/>
</head>
    <body>
      <header>
        <nav>
        <!--<div class="dflex"><a href="#"><img src="img/amazonlogo.png" align="left" class="logo"/><span></span></a>-->
           
           <nav>
            <div class="item">
               <button class="dflex" type="button"><i> Hola, </p><h5>Elige tu Direccion</h5></button>
            </div>
                </div>

                        <div class="searchBox dflex">
                            <div class="box">
                                <div class="dflex">
                                  
                                  <button class="all" type="button"> Todos los Departamentos 
                                     
                                  </button>
                                   <input type="text" id="inputBuscar"><button class="search" onclick="buscar();">Buscar</button>

                                          <nav class=" registros">
                                            <div class="item" id="usuario_logueado">
                                               <a href="login.html"><i> Hola, <span id="nombre_logueado"></span> </p><h5> Cuentas y Listas</h5></i></a>
                                               
                                               </div>
                                            <div class="item">
                                               <button class="dflex" type="button"><i> Devoluciones </p><h5> y Pedidos </h5></button>
                                                   
                                              </div>
                                          
                                              <div class="item">
                                             <button class="dflex" id="btnCarrito" type="button"><i> Carrito </p><h5> </h5></i></button>
                                             <div id="carrito" class="carrito" style="position:absolute; right:200px">
                                        
                                              <table id="lista-carrito" class="tabla-carrito">
                                                          <thead>
                                                              <tr>
                                                                  <th>Imagen</th>
                                                                  <th>Producto</th>
                                                                  <th>Precio</th>
                                                                  <th>Total</th>
                                                                  
                                                              </tr>
                                                          </thead>
                                                          <tbody id="bodyCarrito">
              
                                                          </tbody>
                                              </table>
                                              <div class="botones-carrito">
                                              <a href="#" id="vaciar-carrito" class="btn btn-danger w-50">Vaciar Carrito</a>
                                              <a href="Tabla2/index.html" id="finalizar-pedido" class="btn btn-success w-50">Finalizar pedido</a>
                                              </div>
                      </div>
                </div>
                                </nav>
                             
</div>
                </div>
             </div>
        
        </nav>
      </nav>
        <nav class="subnavegation">
          <ul class="submenu" id="submenu">



            <!-- <li> <a href="#"><i class="fa fa-bars">Todo</li></i>
            <li><a href="#"><li>Vender</li>
            <li><a href="#"><li>Lo mas vendido</li>
            <li><a href="#"><li>Amazon basic<i class="fa fa-sort-desc"></i></li>
            <li><a href="#"><li>Prime</li>
            <li><a href="#"><li>Servicio al cliente</li>
            <li><a href="#"><li>Moda</li>
            <li><a href="#"><li>Electronicos</li>
            <li><a href="#"><li>Promociones</li> -->
            
          </ul>
          <ul>
            <li><a href="#">
              <li class="li">30 Dias GRATIS AmazonMusic</li>
            </a>
          </ul>
        </nav>
        </header>
      <body>
                 <div class="container1">
           <div class="item1">
             <img src="imgproductos/bebes.jpeg" width="200" height="200" alt="" class="item1-img" >
             <div class="item1-text">
              <h3> Para Bebes</h3>
              <p> Ver más </p>
               
             </div>

           </div>
            <div class="item1">
             <img src="imgproductos/celulares.png" width="200" height="200" alt="" class="item1-img" >
             <div class="item1-text">
              <h3> Celulares</h3>
              <p> Ver más </p>
               
             </div>
             </div>
            <div class="item1">
             <img src="imgproductos/deportes.jpeg" width="200" height="200" alt="" class="item1-img" >
             <div class="item1-text">
              <h3> Deportes</h3>
              <p> Ver más </p>
               
             </div>
             </div>
            <div class="item1">
             <img src="imgproductos/limpieza.jpeg" width="200" height="200" alt="" class="item1-img" >
             <div class="item1-text">
              <h3> Productos del hogar</h3>
              <p> Ver más </p>
               
             </div>
             </div>
            <div class="item1">
             <img src="imgproductos/maquillaje.jpeg" width="200" height="200" alt="" class="item1-img" >
             <div class="item1-text">
              <h3> Accesorios para dama</h3>
              <p> Ver más </p>
               
             </div>
             </div>
            <div class="item1">
             <img src="imgproductos/Accesorios.jpeg" width="200" height="200" alt="" class="item1-img" >
             <div class="item1-text">
              <h3> Accesorios para celulares</h3>
              <p> Ver más </p>
               
             </div>
           </div>

         </div>

        </body>
        <footer class="footer">
          <div><button class="pagina" type="button"> inicio de pagina</button> </div>
         
           
          

          <div class="container">
            <div class="row">
              <div class="footer-col">

                <h4>Conocenos</h4>
                <ul>
                  <li><a href="#">Trabajar en Amazon</a></li>
                  <li><a href="#">Informacion corporativa</a></li>
                  <li><a href="#">Departamentos de Prensa</a></li>
                </ul>
                
              </div>
              <div class="footer-col">
                <h4>Gana Dinero con Nosotros</h4>
                <ul>
                  <li><a href="#">Vender en amazon</a></li>
                  <li><a href="#">Vender en amazon en handmade</a></li>
                  <li><a href="#">publica tu libro en kindle</a></li>
                  <li><a href="#">programa de afiliados</a></li>
                  <li><a href="#">anuncia tus productos</a></li>
                </ul>
                
              </div>
              <div class="footer-col">
                <h4>Podemos Ayudarte</h4>
                <ul>
                  <li><a href="#">Amazon y COVID-19</a></li>
                   <li><a href="#">devolver o reemplazar productos</a></li>
                    <li><a href="#">gestionar contenido</a></li>
                     <li><a href="#">ayuda</a></li>
                </ul>
                
              </div>
              <div class="footer-col">
                <h4>Metodos de Pago</h4>
                <ul>
                  <li><a href="#">tardeja de credito o debito</a></li>
                   <li><a href="#">tarjeta de regalo</a></li>
                    <li><a href="#">meses sin intereses</a></li>
                     <li><a href="#">amazon cash</a></li>
                      <li><a href="#">amazon recargable</a></li>
                </ul>
                
              </div>
              
             
             
            </div>
          </div>
           <nav class="paises">
              <ul class="submenuu">

            <li><a href="#">Canadá<li></li>|
              <li><a href="#">Australia<li></li>|
                <li><a href="#">Alemania<li></li>|
            <li><a href="#">China<li></li>|
            <li><a href="#">España<li></li>|
            <li><a href="#">Estados Unidos<li></li>|
            <li><a href="#">Francia<li></li>|
            <li><a href="#">India<li></li>|
            <li><a href="#">Italia<li></li>|
            <li><a href="#">Japon<li></li>|
            <li><a href="#">Paises/Regiones Bajos<li></li>|
            <li><a href="#">Reino unido<li></li>|
            <li><a href="#">Singapur<li></li>|
            <li><a href="#">Turquía<li></li>|
            <li><a href="#">Y también:Amazon Web Services</li></li>
            </ul>
            
          </nav>
          <h2 style="color: white; text-align: center;">Pagina creada con fines educativos</h2>
        </footer>

        <script>

          const inputBuscar = document.querySelector('#inputBuscar');

          const usuario = localStorage.getItem('usuario');

          const usuarioLogueado = JSON.parse(usuario);
          console.log(usuarioLogueado);
          const nombre = document.querySelector('#nombre_logueado');
          const usuarioHTML = document.querySelector('#usuario_logueado');
          const contenidoCarrito = document.querySelector('#bodyCarrito');
          const btnCarrito = document.querySelector('#btnCarrito');
          const uiCarrito = document.querySelector('#carrito');

          btnCarrito.addEventListener('mouseover', () =>{
            uiCarrito.style.display = 'block';
          });
          btnCarrito.addEventListener('mouseout', () =>{
            uiCarrito.style.display = 'none';
          });

          localStorage.removeItem('termino');


          let carritoLocal = localStorage.getItem('carrito');

          if(carritoLocal){
            let carritoLocalJson = JSON.parse(carritoLocal);

          

            let strProductoCarrito = '';
            
            carritoLocalJson.forEach((producto) => {
              strProductoCarrito += '<tr>';
              strProductoCarrito += `<td><img src=http://143.244.157.68:8080/api/productos/imagen/${producto._id} style='width: 100px'></td>`;
              strProductoCarrito += '<td>' + producto.nombre.substr(0,15) + '...</td>';
              strProductoCarrito += '<td>' + producto.precio + '</td>';
              strProductoCarrito += '</tr>'; 
              contenidoCarrito.innerHTML = strProductoCarrito;
            });
          }
          

          const buscar = (e) => {

            localStorage.setItem('termino', inputBuscar.value);

            location.href ="http://143.244.157.68/productos.html";
          }

          if(usuarioLogueado != null) {
            usuarioHTML.innerHTML = `<a onclick='cerrarSesion()' style="cursor: pointer"><i> Hola, ${ usuarioLogueado.nombre } </p><h5> Cuentas y Listas</h5></i></a>`;
          }else{
            usuarioHTML.innerHTML = '<a href="login.html"><i> Hola, Identificate </p><h5> Cuentas y Listas</h5></i></a>';
          }
          
          const cerrarSesion = () => {
            localStorage.removeItem('usuario');
            location.href ="http://143.244.157.68/";
          }

          var requestOptions = {
            method: 'GET',
            redirect: 'follow'
          };

          const subMenu = document.querySelector('#submenu');
          let strMenu = '';

          fetch("http://143.244.157.68:8080/api/categorias", requestOptions)
            .then(response => response.text())
            .then(result => {
              resultJson = JSON.parse(result);


              resultJson.categorias.forEach( (categoria) => {
                strMenu += `<li onclick=guardarCategoria('${ categoria._id }')><a href="productos.html">${ categoria.nombre }<a/></li>`;

                subMenu.innerHTML = strMenu;
              });



              

              
              

            })
            .catch(error => console.log('error', error));

            const guardarCategoria = (id) => {
              localStorage.setItem('idCategoria', id.toString());
              //location.href ="file:///C:/Users/Admin/Desktop/Proyectos%20Web/amazon/equipo4-3-amazon/front-amazon/productos.html";
            }

        </script>

     </body>
</html>